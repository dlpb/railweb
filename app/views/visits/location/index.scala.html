@import helper._

@(
user: models.auth.User,
locationVisits: List[(models.location.Location, List[String], Option[Int])],
mapLocations: List[models.location.MapLocation]
)(implicit request: Request[AnyContent])
@templates.main("All Visits by Location", "Profile", Some(user)){

        <div class="row">
            <div class="col-sm">
                <h1>Locations</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <div id="map" class="map"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                @for((location, visits, index) <- locationVisits) {
                <ul>
                    <li>
                        <a href="/location/detail/@location.id" target="_blank">@location.name</a> [@location.crs.mkString(" ")] (@location.id)<br/>
                        <span class="badge badge-info">Visited @visits.size times</span> @if(index.getOrElse(0) > 0) {<span class="badge badge-dark">Location @index</span>}
                        <ul>
                            @for(visit <- visits){
                            <li><a href="/profile/visits/by/event/@visit">@visit</a></li>
                            }
                        </ul>
                    </li>
                </ul>

                }
            </div>
        </div>


<script type="text/javascript">
        createMap();
        @for(location <- mapLocations){

            addLocation(
            {
                "location": {
                    "lat":@location.location.lat,
                    "lon":@location.location.lon
                },
                "operator":"@location.operator"
            })
        }
</script>
}