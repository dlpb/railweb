@import helper._

@(
user: models.auth.User,
locationVisits: Map[String, List[String]],
mapLocations: List[models.location.MapLocation]
)(implicit request: Request[AnyContent])
@templates.main("All Visits by Location", "Profile", Some(user)){

        <div class="row">
            <div class="col-sm">
                <h1>Locations</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <div id="map" class="map"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                @for((key, value) <- locationVisits) {
                <ul>
                    <li>
                        <a href="/location/detail/@key" target="_blank">@key</a> - visited @value.size times
                        <ul>
                            @for(v <- value){
                            <li>@v</li>
                            }
                        </ul>
                    </li>
                </ul>

                }
            </div>
        </div>


<script type="text/javascript">
        createMap();
        @for(location <- mapLocations){

            addLocation(
            {
                "location": {
                    "lat":@location.location.lat,
                    "lon":@location.location.lon
                },
                "operator":"@location.operator"
            })
        }
</script>
}