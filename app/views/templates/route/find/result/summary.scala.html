@import java.time.LocalDate
@(waypoints: List[controllers.plan.route.find.result.Waypoint],
        manuallyCreated: Boolean,
        jsonCreated: Boolean,
        timetableCreated: Boolean,
        editCall: Call,
        distance: Long,
        time: String,
        followFixedLinks: Boolean,
        followFreightLinks: Boolean,
        followUnknownLinks: Boolean,
        timetableTrainUid: Option[String],
        date: Option[LocalDate],
        timetableTrainOrigin: Option[models.location.Location],
        timetableTrainDestination: Option[models.location.Location]
)

@if(waypoints.nonEmpty) {
    <h2>Route from @waypoints.head.name to @waypoints.last.name</h2>
    <div class="card card-body">
        <h3>Summary</h3>
        <p>Route from: <strong>@waypoints.head.name</strong> to <strong>@waypoints.last.name</strong></p>
        <p>Route via: @waypointList(waypoints) @if(manuallyCreated) {
            <a href="@editCall">Edit Route</a>
        }</p>
        <p>Total locations: <strong>@waypoints.size</strong></p>
        <p>Total public stops: <strong>@waypoints.count(_.isPublicStop)</strong></p>
        <p>Total distance: <strong>@{
            distance / 1000
        } km</strong></p>
        <p>Approximate travel time: <strong>@time</strong></p>
        @if(manuallyCreated) {
            <p>Route source: <strong>Manually Created from Waypoints</strong></p>
        }
        @if(jsonCreated) {
            <p>Route Source<strong>Uploaded Json Timetable</strong></p>
        }
        @if(timetableCreated) {
            <p>Route Source<strong>
                Timetable for train @timetableTrainUid running on @date from @{timetableTrainOrigin.map(_.name)} to @{timetableTrainDestination.map(_.name)}</strong> <a href="@editCall">
                Choose different train timetable</a></p>
        }
        <p>Routing Options:</p>
        <ul>
            @if(followFixedLinks) {
                <li>Following Fixed Links</li>
            }
            @if(followFreightLinks) {
                <li>Following Freight Links</li>
            }
            @if(followUnknownLinks) {
                <li>Following Unknown Links</li>
            }
        </ul>
    </div>
}

    @waypointList(waypoints: List[controllers.plan.route.find.result.Waypoint]) = {
      @for(waypoint <- waypoints.zipWithIndex){
        @if(!waypoint._1.isPublicStop){<i><span class="text-muted">}
        @waypoint._1.name
        @if(!waypoint._1.isPublicStop){</span></i>}
        @if(waypoint._2<waypoints.size){, }
      }
    }

