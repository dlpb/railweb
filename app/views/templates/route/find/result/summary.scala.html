@import java.time.LocalDate
@(waypoints: List[controllers.plan.route.find.result.Waypoint],
        manuallyCreated: Boolean,
        jsonCreated: Boolean,
        timetableCreated: Boolean,
        editCall: Call,
        distance: Long,
        time: String,
        followFixedLinks: Boolean,
        followFreightLinks: Boolean,
        followUnknownLinks: Boolean,
        timetableTrainUid: Option[String],
        date: Option[LocalDate],
        timetableTrainOrigin: Option[models.location.Location],
        timetableTrainDestination: Option[models.location.Location]
)

@if(waypoints.nonEmpty) {
    <h2>Route from @waypoints.head.name to @waypoints.last.name</h2>
    <div class="card card-body">
        <h3>Summary</h3>
        <dl class="row">
            <dd class="col-sm-3">Route From</dd>
            <dt class="col-sm-9"><strong>@waypoints.head.name</strong> to <strong>@waypoints.last.name</strong></dt>
            <dd class="col-sm-3">Route Via</dd>
            <dt class="col-sm-9">@waypointList(waypoints) @if(manuallyCreated) {
                <a href="@editCall">Edit Route</a>
            }</dt>
            <dd class="col-sm-3">Total Locations</dd>
            <dt class="col-sm-9">@waypoints.size</dt>
            <dd class="col-sm-3">Total Public Stops</dd>
            <dt class="col-sm-9">@waypoints.count(_.isPublicStop)</dt>
            <dd class="col-sm-3">Total Distance</dd>
            <dt class="col-sm-9">@{
                distance / 1000
            } km</dt>
            <dd class="col-sm-3">Approximate Travel Time</dd>
            <dt class="col-sm-9">@time</dt>
            <dd class="col-sm-3">Route Source
            </dd>
            <dt class="col-sm-9">
                @if(manuallyCreated) {
                    Manually Created from Waypoints
                }
                @if(jsonCreated) {
                    Uploaded Json Timetable
                }
                @if(timetableCreated) {
                        Timetable for train @timetableTrainUid running on @date from @{timetableTrainOrigin.map(_.name)} to @{timetableTrainDestination.map(_.name)} <a href="@editCall">
                        Choose different train timetable</a>
                }
            </dt>
            <dd class="col-sm-3">Routing Options</dd>
            <dt class="col-sm-9"><ul>
                @if(followFixedLinks) {
                    <li>Following Fixed Links</li>
                }
                @if(followFreightLinks) {
                    <li>Following Freight Links</li>
                }
                @if(followUnknownLinks) {
                    <li>Following Unknown Links</li>
                }
            </ul></dt>
        </dl>
    </div>
}

    @waypointList(waypoints: List[controllers.plan.route.find.result.Waypoint]) = {
      @for(waypoint <- waypoints.zipWithIndex){
        @if(!waypoint._1.isPublicStop){<i><span class="text-muted">}
        @waypoint._1.name
        @if(!waypoint._1.isPublicStop){</span></i>}
        @if(waypoint._2<waypoints.size){, }
      }
    }

